{"version":3,"file":"static/js/943.6e25374b.chunk.js","mappings":"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","sources":["webpack://movie-portal/./src/components/FloatingInput/FloatingInput.module.scss?60f8","components/FloatingInput/FloatingInput.tsx","webpack://movie-portal/./src/pages/RegistrationPage/RegistationPage.module.scss?c175","pages/RegistrationPage/RegistrationPage.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"FloatingInput_container__-xl1h\"};","import styles from './FloatingInput.module.scss';\r\n\r\ninterface Props {\r\n  text: string;\r\n  data: string;\r\n  setData: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  name: string;\r\n  type: string;\r\n}\r\n\r\nexport function FloatingInput({ text, data, setData, name, type }: Props) {\r\n  return (\r\n    <div className={styles.container}>\r\n      <input type={type} name={name} value={data} onChange={setData} placeholder=\"\" />\r\n      <label>{text}</label>\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"RegistationPage_container__M312C\"};","import { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { setUser } from '../../features/authSlice/authSlice';\r\nimport { foundUserInUserList, regInUserList } from '../../utils/utils';\r\nimport { FloatingInput } from '../../components/FloatingInput/FloatingInput';\r\nimport { Button } from '../../components/Button/Button';\r\nimport styles from './RegistationPage.module.scss';\r\nimport { useAppDispatch } from '../../hooks/typedReduxHooks/reduxHook';\r\n\r\ninterface ValidateResult {\r\n  success: boolean;\r\n  message: string;\r\n}\r\n\r\ninterface RegistrateParams {\r\n  login: string;\r\n  password: string;\r\n  secondPass: string;\r\n}\r\nconst RegistationPage = () => {\r\n  const [credentials, setCredentials] = useState<RegistrateParams>({\r\n    login: '',\r\n    password: '',\r\n    secondPass: '',\r\n  });\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const registrateAccount = ({ login, password, secondPass }: RegistrateParams) => {\r\n    const isValidLog = validateLogin(login);\r\n    const isValidPass = validatePassword(password, secondPass);\r\n\r\n    if (isValidLog.success && isValidPass.success) {\r\n      dispatch(setUser({ authorized: true, userData: { name: login, password, favorites: [] } }));\r\n      regInUserList(login, password);\r\n      console.log('Account succesfuly registrated');\r\n      navigate('/');\r\n    } else {\r\n      console.log(!isValidLog.success && isValidLog.message);\r\n      console.log(!isValidPass.success && isValidPass.message);\r\n    }\r\n  };\r\n\r\n  const validateLogin = (log: string): ValidateResult => {\r\n    log = log.replace(/\\s+/g, '');\r\n\r\n    if (foundUserInUserList(log)) {\r\n      return { success: false, message: 'Current account have been registrated' };\r\n    }\r\n\r\n    if (log.length < 5) {\r\n      return { success: false, message: 'Login is too short' };\r\n    }\r\n    return { success: true, message: '' };\r\n  };\r\n\r\n  const validatePassword = (pass1: string, pass2: string): ValidateResult => {\r\n    pass1 = pass1.replace(/\\s+/g, '');\r\n    pass2 = pass2.replace(/\\s+/g, '');\r\n\r\n    if (pass1.length < 8) {\r\n      return { success: false, message: 'Password is too short' };\r\n    }\r\n\r\n    if (pass1 !== pass2) {\r\n      return { success: false, message: 'Passwords do not match' };\r\n    }\r\n\r\n    const hasLetter = /[A-Za-z]/.test(pass1);\r\n    const hasNumber = /[0-9]/.test(pass1);\r\n\r\n    if (!hasLetter || !hasNumber) {\r\n      return {\r\n        success: false,\r\n        message: 'Password must contain at least one letter and one number',\r\n      };\r\n    }\r\n\r\n    return { success: true, message: '' };\r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setCredentials((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h4>Registration</h4>\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          registrateAccount(credentials);\r\n        }}>\r\n        <FloatingInput\r\n          data={credentials.login}\r\n          text=\"Login\"\r\n          type=\"text\"\r\n          setData={handleInputChange}\r\n          name=\"login\"\r\n        />\r\n\r\n        <FloatingInput\r\n          data={credentials.password}\r\n          text=\"password\"\r\n          type=\"password\"\r\n          setData={handleInputChange}\r\n          name=\"password\"\r\n        />\r\n        <FloatingInput\r\n          data={credentials.secondPass}\r\n          text=\"repeat password\"\r\n          type=\"password\"\r\n          setData={handleInputChange}\r\n          name=\"secondPass\"\r\n        />\r\n\r\n        <Button text=\"Registrate\" />\r\n      </form>\r\n      <Button text=\"Have account?\" onClick={() => navigate('/auth')} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RegistationPage;\r\n"],"names":["FloatingInput","_ref","text","data","setData","name","type","_jsxs","className","styles","container","children","_jsx","value","onChange","placeholder","RegistationPage","credentials","setCredentials","useState","login","password","secondPass","dispatch","useAppDispatch","navigate","useNavigate","validateLogin","log","replace","foundUserInUserList","success","message","length","validatePassword","pass1","pass2","hasLetter","test","hasNumber","handleInputChange","e","target","prev","onSubmit","preventDefault","isValidLog","isValidPass","setUser","authorized","userData","favorites","regInUserList","console","registrateAccount","Button","onClick"],"sourceRoot":""}